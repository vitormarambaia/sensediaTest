"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const assert_1 = __importDefault(require("assert"));
const fs_1 = __importDefault(require("fs"));
const glob_1 = __importDefault(require("glob"));
const path_1 = __importDefault(require("path"));
const index_1 = __importDefault(require("../src/index"));
describe('detectCiEnvironment', () => {
    for (const txt of glob_1.default.sync(`${__dirname}/../../testdata/*.txt`)) {
        it(`detects ${path_1.default.basename(txt, '.txt')}`, () => {
            const envData = fs_1.default.readFileSync(txt, { encoding: 'utf8' });
            const entries = envData.split(/\n/).map((line) => line.split(/=/));
            const env = Object.fromEntries(entries);
            const ciEnvironment = (0, index_1.default)(env);
            const expectedJson = fs_1.default.readFileSync(`${txt}.json`, {
                encoding: 'utf8',
            });
            assert_1.default.deepStrictEqual(ciEnvironment, JSON.parse(expectedJson));
        });
    }
});
//# sourceMappingURL=acceptanceTest.js.map