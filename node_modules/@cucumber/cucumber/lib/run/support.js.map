{"version":3,"file":"support.js","sourceRoot":"","sources":["../../src/run/support.ts"],"names":[],"mappings":";;;;;;AAEA,mGAAuE;AACvE,6BAAmC;AACnC,4CAA6C;AAE7C,8DAA8D;AAC9D,MAAM,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAC,aAAa,CAAC,CAAA;AAEpC,KAAK,UAAU,qBAAqB,CAAC,EAC1C,GAAG,EACH,KAAK,EACL,0BAA0B,EAC1B,gBAAgB,GAMjB;IACC,sCAAyB,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,CAAA;IAC3C,0BAA0B,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAA;IAC3D,KAAK,MAAM,QAAQ,IAAI,gBAAgB,EAAE;QACvC,IAAI,0BAA0B,CAAC,MAAM,IAAI,CAAC,IAAA,sBAAY,EAAC,QAAQ,CAAC,EAAE;YAChE,OAAO,CAAC,QAAQ,CAAC,CAAA;SAClB;aAAM;YACL,MAAM,QAAQ,CAAC,IAAA,mBAAa,EAAC,QAAQ,CAAC,CAAC,CAAA;SACxC;KACF;IACD,OAAO,sCAAyB,CAAC,QAAQ,EAAE,CAAA;AAC7C,CAAC;AArBD,sDAqBC","sourcesContent":["import { IdGenerator } from '@cucumber/messages'\nimport { ISupportCodeLibrary } from '../support_code_library_builder/types'\nimport supportCodeLibraryBuilder from '../support_code_library_builder'\nimport { pathToFileURL } from 'url'\nimport { isJavaScript } from '../cli/helpers'\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst { importer } = require('../importer')\n\nexport async function getSupportCodeLibrary({\n  cwd,\n  newId,\n  supportCodeRequiredModules,\n  supportCodePaths,\n}: {\n  cwd: string\n  newId: IdGenerator.NewId\n  supportCodeRequiredModules: string[]\n  supportCodePaths: string[]\n}): Promise<ISupportCodeLibrary> {\n  supportCodeLibraryBuilder.reset(cwd, newId)\n  supportCodeRequiredModules.map((module) => require(module))\n  for (const codePath of supportCodePaths) {\n    if (supportCodeRequiredModules.length || !isJavaScript(codePath)) {\n      require(codePath)\n    } else {\n      await importer(pathToFileURL(codePath))\n    }\n  }\n  return supportCodeLibraryBuilder.finalize()\n}\n"]}